# 分镜与运镜指南

> 从参考项目提取的核心经验，可直接用于我们的橘猫贵宾项目

---

## 一、分镜结构（三格法）

每个镜头拆分为3个关键帧：

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   首帧       │ →  │   关键帧     │ →  │   尾帧       │
│  First      │    │    Key      │    │   Last      │
│ 动作前静态   │    │  动作高潮    │    │  动作结束    │
└─────────────┘    └─────────────┘    └─────────────┘
```

| 帧类型 | 作用 | Prompt要点 |
|--------|------|------------|
| 首帧 | 动作前的静态画面 | 强调"静态"、"初始状态"、无任何动作 |
| 关键帧 | 动作最精彩的瞬间 | 强调"动态张力"、"情绪顶点"、可有动态模糊 |
| 尾帧 | 动作结束后的状态 | 强调"最终状态"、"结果" |

---

## 二、景别标准

| 景别 | 英文 | 用途 | 我们的应用 |
|------|------|------|------------|
| 大远景 | extreme wide | 环境氛围 | 纽约街头全景 |
| 远景 | wide shot | 全身动作、空间关系 | 两人并肩走路 |
| 中景 | medium shot | 交互对话、情感交流 | **常用**：两人对话 |
| 近景 | close-up | 细节展示、情绪表达 | 橘猫得意的表情 |
| 特写 | extreme close-up | 关键道具、强烈情绪 | 金链子、LV包 |

**我们的默认选择**：中景（medium shot），保证两个角色始终完整在画面中

---

## 三、运镜类型

| 运镜 | 英文Prompt | 效果 | 适用场景 |
|------|------------|------|----------|
| 固定 | static, locked camera | 相机不动 | 对话场景 |
| 推进 | zoom in, push in, dolly in | 靠近主体，增强紧张感 | 关键台词 |
| 拉远 | zoom out, pull out | 扩大视野 | 环境交代 |
| 左摇 | pan left | 水平向左 | 展示环境 |
| 右摇 | pan right | 水平向右 | 展示环境 |
| 跟随 | camera follows, tracking shot | 跟着主体移动 | **行走场景必用** |

### ⚠️ 我们的核心原则

```
❌ 错误写法：character walks forward（角色走向远方 → 会离开画面）
✅ 正确写法：camera follows characters walking, background moves（相机跟随，背景移动）
```

---

## 四、角色一致性控制

### 4.1 角色描述模板

```
【橘猫】外貌描述（用于每个Prompt）：
An anthropomorphic orange tabby cat, chubby and prosperous build,
wearing LV leather jacket and LV cap, thick gold chain around neck,
confident swagger, 3D Pixar animation style

【贵宾】外貌描述：
An anthropomorphic poodle with tall slender figure,
wearing golden bikini and gold jewelry,
seductive yet shrewd eyes, 3D Pixar animation style
```

### 4.2 一致性硬约束（必须加在每个Prompt里）

```
【强制约束】
- Both characters must remain fully visible in frame at all times
- Never let any character leave the frame boundary
- Use "camera follows" instead of "character walks away"
- Maintain consistent character appearance throughout
- Medium shot framing, keep both characters in center
```

### 4.3 参考图机制

使用起始帧作为参考图（first_frame_image），这是保持一致性的关键。

### 4.4 首尾相连循环素材（重要心法）

**问题**：如果角色说话超过6秒，需要循环播放同一段视频，但如果首尾不衔接，循环时会"跳"一下，穿帮。

**解决方案**：生成视频时，让 `first_frame ≈ last_frame`，形成完美loop。

```
生成时设置：
- first_frame_image: 某个姿态的图片
- last_frame_image: 同一个姿态的图片（或非常接近）

效果：
┌──────┐┌──────┐┌──────┐
│ 6秒  ││ 6秒  ││ 6秒  │  ← 循环播放无缝衔接
└──────┘└──────┘└──────┘
```

**应用场景**：
- 角色说长台词时，循环播放"说话"视频
- 角色听别人说话时，循环播放"听"视频
- 任何需要重复使用的素材

**制作要点**：
1. 生成"说话loop"素材：角色张嘴说话的循环动画
2. 生成"听loop"素材：角色点头/微动的循环动画
3. 两种素材都要首尾相连

---

## 五、对话类短剧素材准备（核心技巧）

> 适用于：纯对话推动剧情的短剧（相声、脱口秀、情景对话）

### 5.1 制作流程

```
Step 1: 准备定装照（静态图）
────────────────────────────
  - 两个角色同框
  - 固定好光线、机位、背景
  - 这张图是所有素材的基准

        ↓

Step 2: 生成"A说话B听"视频
────────────────────────────
  - 输入：定装照作为first_frame
  - Prompt：A角色说话，B角色静听
  - 关键：尾帧≈首帧（可循环）
  - 输出：6秒循环视频

        ↓

Step 3: 生成"B说话A听"视频
────────────────────────────
  - 输入：同一张定装照
  - Prompt：B角色说话，A角色静听
  - 关键：尾帧≈首帧（可循环）
  - 输出：6秒循环视频

        ↓

Step 4: 素材完成
────────────────────────────
  一个场景只需3个文件：
  ├── 定装照.jpg
  ├── A说话.mp4（可循环）
  └── B说话.mp4（可循环）

        ↓

  后续制作：写剧本 → TTS → 自动合成 → 出片
```

### 5.2 关键要点

| 要点 | 说明 |
|------|------|
| **固定基准** | 所有视频都从同一张定装照生成，保证场景一致 |
| **光线机位不变** | Prompt里强调"same lighting, same camera angle" |
| **首尾相连** | 让视频可无缝循环，长台词不跳帧 |
| **角色不离开画面** | 说话的人动，听的人微动，都不能出画面 |

### 5.3 素材命名规范

每个场景的素材按以下规则命名：

```
剧集/
└── 第X集_标题/
    ├── 起始帧.jpg                    # 定装照（静态图）
    ├── 橘猫说话.mp4                  # 橘猫说话，白猫听
    ├── 白猫说话.mp4                  # 白猫说话，橘猫听
    ├── 音频/                         # TTS语音
    └── 成品/                         # 最终视频
```

**命名规则**：`{说话角色}说话.mp4`

如果同一集有多个场景：
```
第X集_标题/
├── 场景1_街头/
│   ├── 起始帧.jpg
│   ├── 橘猫说话.mp4
│   └── 白猫说话.mp4
├── 场景2_公寓/
│   ├── 起始帧.jpg
│   ├── 橘猫说话.mp4
│   └── 白猫说话.mp4
```

### 5.4 视频生成关键技巧（重要！）

> ⚠️ **必须明确指定：一个说话，另一个闭嘴**

**问题**：如果Prompt不明确，AI很容易生成两个角色同时说话，这种素材无法使用。

**正确写法**：
```
Orange cat is talking with mouth movements and gestures.
White cat is LISTENING SILENTLY with mouth CLOSED, only subtle reactions.
```

**错误写法**：
```
Two cats having a conversation.  ← 会导致两个都在说话
```

**关键词**：
- 说话的角色：`talking, speaking, mouth movements`
- 听的角色：`listening silently, mouth closed, just nodding`

### 5.5 素材生成Prompt示例

**生成"橘猫说话白猫听"**：
```
Same scene, same lighting, same camera angle as the input image.
Orange cat talking with expressive gestures and mouth movement.
White cat listening, subtle reactions, slight head nods.
Both characters stay in frame throughout, no one leaves.
Loop-friendly: end pose should be similar to start pose.
3D Pixar animation style.
```

**生成"白猫说话橘猫听"**：
```
Same scene, same lighting, same camera angle as the input image.
White cat talking with gestures and expressions.
Orange cat listening, nodding occasionally, subtle reactions.
Both characters stay in frame throughout.
Loop-friendly: end pose should be similar to start pose.
3D Pixar animation style.
```

### 5.4 这种模式的优缺点

**优点**：
- 成本极低（一个场景只需生成2段视频素材）
- 制作极快（有素材后，写剧本→出片只需几分钟）
- 角色一致性好（都从同一张定装照生成）
- 可批量生产（换剧本就是新内容）

**缺点**：
- 只适合对话类剧情
- 画面变化少，需要靠台词撑住
- 不适合动作戏、追逐戏等复杂场景

### 5.5 适合的内容类型

| 适合 | 不适合 |
|------|--------|
| ✅ 相声/脱口秀 | ❌ 动作片 |
| ✅ 情侣/夫妻日常吐槽 | ❌ 追逐戏 |
| ✅ 讲段子/讲笑话 | ❌ 多场景切换 |
| ✅ 访谈/采访 | ❌ 需要特写镜头 |
| ✅ 暴发户炫富对话 | ❌ 需要大量肢体动作 |

---

## 六、图生视频Prompt模板

### 6.1 行走场景（我们最常用）

```
Prompt模板：

Two anthropomorphic characters walking side by side on a sunny New York street.
Left: chubby orange tabby cat in LV jacket and cap, gold chain, confident swagger.
Right: tall slender poodle in golden bikini and gold jewelry.

Camera follows characters at medium shot, background street scene moves past them.
Characters stay centered in frame, natural walking motion, subtle head movements.

3D Pixar animation style, warm afternoon lighting, cinematic quality.

【约束】Both characters must remain fully visible throughout the entire video.
```

### 6.2 对话场景

```
Prompt模板：

Two anthropomorphic characters standing and talking on a New York street.
Left: chubby orange tabby cat in LV jacket, gesturing while talking, expressive face.
Right: tall slender poodle in golden bikini, listening with raised eyebrow.

Static camera, medium shot, both characters centered.
Subtle body language, lip sync ready for dialogue.

3D Pixar animation style, warm lighting.

【约束】Both characters must remain fully visible, no character exits frame.
```

### 6.3 橘猫得意表情

```
Prompt模板：

Close-up of anthropomorphic orange tabby cat face.
Chubby cheeks, wearing LV cap, thick gold chain visible.
Smug satisfied expression, slight head tilt, confident smirk.

Static camera, soft focus background.
3D Pixar animation style.
```

---

## 七、分镜脚本格式

### 7.1 推荐的JSON格式

```json
{
  "episode": "第一集",
  "title": "买画",
  "scenes": [
    {
      "shot_number": 1,
      "duration": 10,
      "shot_type": "medium shot",
      "camera": "camera follows, background moves",
      "action": "两人并肩走在街头",
      "dialogue": [
        {"character": "橘猫", "line": "媳妇儿，我今天买了幅画，八百万！"},
        {"character": "贵宾", "line": "啥画这么贵？"}
      ],
      "emotion": "得意",
      "video_prompt": "Two anthropomorphic characters walking side by side... [完整prompt]"
    }
  ]
}
```

### 7.2 Markdown简化格式

```markdown
## V1（0-10秒）

**景别**：中景跟拍
**运镜**：camera follows, background moves
**动作**：两人并肩走在街头，橘猫得意地比划

**橘猫**：媳妇儿，我今天买了幅画，八百万！
**贵宾**：啥画这么贵？

**Video Prompt**：
Two anthropomorphic characters walking side by side on sunny New York street.
Camera follows at medium shot, background moves.
[角色描述...]
```

---

## 八、立即可用的工作流

### Step 1：准备

- [x] 起始帧图片：`尼古拉斯点橘和雪莉点贵宾.jpg`
- [x] 角色Voice ID：`shehui_dage_jumu_002` / `guibin_xiaojie_001`

### Step 2：写分镜

用上面的模板写每个10秒镜头的：
- 景别 + 运镜
- 动作描述
- 对话台词
- Video Prompt（英文）

### Step 3：生成视频

```
API调用：
- model: video-01
- first_frame_image: 起始帧base64
- prompt: Video Prompt
- duration: 10秒
```

### Step 4：检查

生成后检查：
- [ ] 两个角色是否都在画面中？
- [ ] 角色外形是否一致？
- [ ] 如果只剩一个角色 → 必须重新用原始起始帧

---

## 九、常见问题处理

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| 角色消失 | Prompt没强调两角色 | 加"both characters visible" |
| 角色变形 | 没用参考图 | 必须用first_frame_image |
| 走出画面 | 用了walks forward | 改用camera follows |
| 风格不一致 | 没固定风格词 | 每次都加"3D Pixar style" |

---

*更新时间：2026-01-25*
